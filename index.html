<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Dice Game - Stakeé¢¨</title>
  <style>
    body { font-family: sans-serif; background: #121212; color: #fff; text-align: center; padding: 20px; }
    button { margin: 5px; padding: 10px 20px; font-size: 16px; }
    input { padding: 5px; margin: 5px; font-size: 16px; width: 100px; }
  </style>
</head>
<body>
  <h1>ğŸ² Dice Game - Stakeé¢¨</h1>

  <div>
    æ‰€æŒé‡‘: <span id="balance">0</span> å††<br>
    éŠ€è¡Œ: <span id="bank">0</span> å††
  </div>

  <div style="margin-top:20px;">
    <input type="number" id="bet" value="100" min="1" max="10000000"> å††ã‚’è³­ã‘ã‚‹
    <button onclick="playDice()">ğŸ² ãƒ—ãƒ¬ã‚¤</button>
  </div>

  <div style="margin-top:20px;">
    <button onclick="work()" id="workBtn">ğŸ’¼ WORK</button><br>
    <small id="cooldownInfo"></small>
  </div>

  <div style="margin-top:20px;">
    <input type="number" id="amount" value="0">
    <button onclick="deposit()">éŠ€è¡Œã«é ã‘ã‚‹</button>
    <button onclick="withdraw()">å¼•ãå‡ºã™</button>
  </div>

  <script>
    const balanceEl = document.getElementById('balance');
    const bankEl = document.getElementById('bank');
    const workBtn = document.getElementById('workBtn');
    const cooldownInfo = document.getElementById('cooldownInfo');

    function getCookie(name) {
      const value = document.cookie.match('(^|;)\\s*' + name + '\\s*=\\s*([^;]+)');
      return value ? parseInt(value.pop()) : 0;
    }

    function setCookie(name, value, days = 365) {
      const date = new Date();
      date.setTime(date.getTime() + (days*24*60*60*1000));
      document.cookie = `${name}=${value}; expires=${date.toUTCString()}; path=/`;
    }

    function updateDisplay() {
      balanceEl.textContent = getCookie('balance');
      bankEl.textContent = getCookie('bank');
    }

    function playDice() {
      let bet = parseInt(document.getElementById('bet').value);
      let balance = getCookie('balance');

      if (bet < 1 || bet > 10000000) {
        alert("è³­ã‘é‡‘ã¯1å††ä»¥ä¸Š1000ä¸‡å††ä»¥ä¸‹ã§ã™ã€‚");
        return;
      }

      if (balance < bet) {
        alert("æ‰€æŒé‡‘ãŒè¶³ã‚Šã¾ã›ã‚“ï¼");
        return;
      }

      const win = Math.random() < 0.49; // 49% å‹ç‡
      if (win) {
        balance += bet;
        alert("å‹ã¡ã¾ã—ãŸï¼ +" + bet + "å††");
      } else {
        balance -= bet;
        alert("è² ã‘ã¾ã—ãŸ... -" + bet + "å††");
      }

      setCookie('balance', balance);
      updateDisplay();
    }

    function work() {
      const lastWork = parseInt(getCookie('lastWork') || 0);
      const now = Date.now();
      const oneHour = 60 * 60 * 1000;

      if (now - lastWork < oneHour) {
        const wait = Math.ceil((oneHour - (now - lastWork)) / 60000);
        alert("WORKã¯ã‚ã¨ " + wait + " åˆ†ã§åˆ©ç”¨å¯èƒ½ã§ã™ã€‚");
        return;
      }

      workBtn.disabled = true;
      cooldownInfo.textContent = "ä½œæ¥­ä¸­...";

      setTimeout(() => {
        const earn = Math.floor(Math.random() * (5000 - 200 + 1)) + 200;
        let balance = getCookie('balance') + earn;

        setCookie('balance', balance);
        setCookie('lastWork', Date.now());
        updateDisplay();
        workBtn.disabled = false;
        cooldownInfo.textContent = "";
        alert("ä½œæ¥­å®Œäº†ï¼ +" + earn + "å††");
      }, Math.random() * 3000 + 2000); // 2ã€œ5ç§’ãƒ©ãƒ³ãƒ€ãƒ 
    }

    function deposit() {
      let amount = parseInt(document.getElementById('amount').value);
      let balance = getCookie('balance');
      let bank = getCookie('bank');

      if (amount > 0 && amount <= balance) {
        balance -= amount;
        bank += amount;
        setCookie('balance', balance);
        setCookie('bank', bank);
        updateDisplay();
      } else {
        alert("æ‰€æŒé‡‘ãŒè¶³ã‚Šã¾ã›ã‚“ã€‚");
      }
    }

    function withdraw() {
      let amount = parseInt(document.getElementById('amount').value);
      let balance = getCookie('balance');
      let bank = getCookie('bank');

      if (amount > 0 && amount <= bank) {
        bank -= amount;
        balance += amount;
        setCookie('balance', balance);
        setCookie('bank', bank);
        updateDisplay();
      } else {
        alert("éŠ€è¡Œæ®‹é«˜ãŒè¶³ã‚Šã¾ã›ã‚“ã€‚");
      }
    }

    function updateCooldownInfo() {
      const lastWork = parseInt(getCookie('lastWork') || 0);
      const now = Date.now();
      const oneHour = 60 * 60 * 1000;

      if (now - lastWork < oneHour) {
        workBtn.disabled = false;
      }
    }

    // åˆæœŸåŒ–
    if (!getCookie('balance')) setCookie('balance', 1000);
    if (!getCookie('bank')) setCookie('bank', 0);
    updateDisplay();
    updateCooldownInfo();
  </script>
</body>
</html>
